# مرجع أخطاء Vercel (ترجمة وشرح بالعربية)

ملاحظة سريعة: هذا الملف موجز ويهدف إلى تسهيل تشخيص الأخطاء الشائعة التي قد تظهر على منصة Vercel. لكل خطأ يوجد: رمز الخطأ — حالة HTTP — وصف موجز — خطوات تشخيص/تصحيح سريعة — متى تتواصل مع دعم Vercel.

---

## **أخطاء الدوال (Function)**

- `BODY_NOT_A_STRING_FROM_FUNCTION` — 502
  - الوصف: استجابة الدالة لم تُرجع جسم من نوع سلسلة كما هو متوقع.
  - التصحيح: تأكد أن الدالة ترجع نصًا (string) أو جسمًا مُحولًا إلى نص عند الحاجة؛ تحقق من serializing للـ JSON.
  - تواصل مع الدعم: إذا كانت الدالة تُرجع نصًا محليًا لكن عبر Vercel يحدث الاختلاف.

- `EDGE_FUNCTION_INVOCATION_FAILED` — 500
  - الوصف: فشل استدعاء دالة Edge داخليًا.
  - التصحيح: راجع سجلات الدالة، تحقّق من الاستثناءات، وتأكد من الاعتمادات الخارجية.

- `EDGE_FUNCTION_INVOCATION_TIMEOUT` — 504
  - الوصف: انتهاء مهلة استدعاء دالة Edge.
  - التصحيح: اختصر زمن التنفيذ، استعمل استدعاءات غير متزامنة، أو زد مهلة إن أمكن.

- `FUNCTION_INVOCATION_FAILED` — 500
  - الوصف: فشل تنفيذ الدالة نتيجة استثناء داخلي.
  - التصحيح: افحص سجلات الأخطاء، أضف try/catch واحتفظ بمخرجات سجلات كافية.

- `FUNCTION_INVOCATION_TIMEOUT` — 504
  - الوصف: انتهاء مهلة تنفيذ الدالة.
  - التصحيح: قلّل زمن التنفيذ أو استخرج الجزء البطيء (DB، طلب خارجي) وحسّنه.

- `FUNCTION_PAYLOAD_TOO_LARGE` — 413
  - الوصف: حمولة الطلب/الاستدعاء إلى الدالة أكبر من الحد المسموح.
  - التصحيح: قلّل حجم البيانات المرسلة، استخدم التخزين المؤقت أو تخزين الملفات في S3/Blob ثم أرسل مرجعًا.

- `FUNCTION_RESPONSE_PAYLOAD_TOO_LARGE` — 500
  - الوصف: رد الدالة أكبر من الحد الداخلي أو فشل معالجته.
  - التصحيح: قلّل حجم الاستجابة أو استخدم ضغط وتجزئة النتائج.

- `FUNCTION_THROTTLED` — 503
  - الوصف: استدعاءات الدالة تم تقييدها مؤقتًا (throttling).
  - التصحيح: نفّذ retry مع backoff، قلّل معدل الطلبات، استعمل caching للنتائج.

- `NO_RESPONSE_FROM_FUNCTION` — 502
  - الوصف: الدالة لم ترجع استجابة ضمن الإطار المتوقع.
  - التصحيح: سجّل نقاط البداية والنهاية في الدالة؛ تحقق من أخطاء الشبكة أو عمليات الانتظار.

- `MICROFRONTENDS_MIDDLEWARE_ERROR` — 500
  - الوصف: خطأ في middleware لميكروفـرونتند.
  - التصحيح: افحص تكوين الميكروفـرونتند وملفات fallback.

- `MICROFRONTENDS_MISSING_FALLBACK_ERROR` — 400
  - الوصف: غير موجود ملف fallback مطلوب.
  - التصحيح: أضف fallback صالح أو حدّث إعدادات البنية.

- `MIDDLEWARE_INVOCATION_FAILED` — 500
  - الوصف: فشل تنفيذ middleware.
  - التصحيح: راجع الشيفرة والاعتمادات الخارجية التي يعتمد عليها middleware.

- `MIDDLEWARE_INVOCATION_TIMEOUT` — 504
  - الوصف: مهلة تنفيذ middleware.
  - التصحيح: اختصر العمل داخل middleware أو مرّره إلى دالة خارجية أسرع.

- `MICROFRONTENDS_RUNTIME_DEPRECATED` — 503
  - الوصف: بيئة runtime قديمة أو لم تعد مدعومة.
  - التصحيح: حدّث التكوين لاستخدام runtime مدعوم.

- `INFINITE_LOOP_DETECTED` — 508
  - الوصف: تم اكتشاف حلقة غير منتهية داخل التطبيق/الدالة.
  - التصحيح: مراجعة شروط الخروج من الحلقات، حماية ضد التكرار المتسلسل.

- `SANDBOX_NOT_LISTENING` — 502
  - الوصف: الحاوية/الصندوق لم يبدأ بالاستماع على البورت المتوقع.
  - التصحيح: تأكد من أن الخادم يبدأ بنجاح داخل بيئة التشغيل.

- `SANDBOX_STOPPED` — 410
  - الوصف: sandbox توقف، ربما بسبب خطأ أو انتهاء موارد.
  - التصحيح: راجع سجلات التوقف وابحث عن استثناءات قبل الإيقاف.


## **أخطاء النشر (Deployment)**

- `DEPLOYMENT_BLOCKED` — 403
  - الوصف: النشر مرفوض (سياسات، صلاحيات، أو إعدادات). 
  - التصحيح: تحقق من إعدادات الفريق، قيود المشروع، وصلاحيات الحساب.

- `DEPLOYMENT_DELETED` — 410
  - الوصف: تم حذف عملية النشر المشار إليها.
  - التصحيح: انشر نسخة جديدة.

- `DEPLOYMENT_DISABLED` — 402
  - الوصف: النشر معطّل (ربما بسبب فواتير أو قيود). 
  - التصحيح: تحقق من حالة الحساب/الاشتراك والفوترة.

- `DEPLOYMENT_NOT_FOUND` — 404
  - الوصف: لم يتم العثور على النشر المشار إليه.
  - التصحيح: تحقق من معرف النشر واستخدم السجل الصحيح.

- `DEPLOYMENT_NOT_READY_REDIRECTING` — 303
  - الوصف: النشر لم يجهز بعد ويجري إعادة توجيه.
  - التصحيح: انتظر إنتهاء عملية النشر أو تحقق من الـ logs.

- `DEPLOYMENT_PAUSED` — 503
  - الوصف: نشر مؤقتًا موقوف.
  - التصحيح: تأكد من وضع المشروع وقيود الموارد.

- `NOT_FOUND` — 404
  - الوصف: المورد أو صفحة النشر غير موجودة.
  - التصحيح: تحقق من المسارات وملف `routes` إن وُجد.


## **أخطاء DNS**

- `DNS_HOSTNAME_EMPTY` — 502
  - الوصف: لم يُمرّر اسم المضيف.
  - التصحيح: تأكد من إعداد المضيف والـ CNAME / A record.

- `DNS_HOSTNAME_NOT_FOUND` — 502
  - الوصف: اسم المضيف لم يُحلّ.
  - التصحيح: تحقق من سجلات DNS وانتشارها، استخدم `nslookup`/`dig` محليًا.

- `DNS_HOSTNAME_RESOLVE_FAILED` — 502
  - الوصف: فشل حل اسم المضيف (خطأ مؤقت أو غير قابل للحل).
  - التصحيح: تحقق من موفر DNS وإعداداته.

- `DNS_HOSTNAME_RESOLVED_PRIVATE` — 404
  - الوصف: الاسم يُحل إلى عنوان داخلي/خاص لا يمكن الوصول إليه من الإنترنت العام.
  - التصحيح: تأكد من أن السجل لا يشير إلى شبكة داخلية.

- `DNS_HOSTNAME_SERVER_ERROR` — 502
  - الوصف: خادم DNS أعاد خطأ.
  - التصحيح: جرّب DNS آخر أو اتصل بمزوّد DNS.


## **أخطاء الصور والتحسين (Image)**

- `INVALID_IMAGE_OPTIMIZE_REQUEST` — 400
  - الوصف: طلب تحسين صورة غير صالح (مثلاً URL غير صحيح).
  - التصحيح: تحقق من مسار الصورة ومعلمات الطلب.

- `OPTIMIZED_EXTERNAL_IMAGE_REQUEST_FAILED` — 502
  - الوصف: فشل تحميل الصورة الخارجية للتحسين.
  - التصحيح: تأكد من الوصول إلى المصدر الخارجي وتصحيح الروابط.

- `OPTIMIZED_EXTERNAL_IMAGE_REQUEST_INVALID` — 502
  - الوصف: الرد من المصدر الخارجي غير صالح.
  - التصحيح: تحقق من استجابة الخادم الخارجي (CORS، رمز الحالة).

- `OPTIMIZED_EXTERNAL_IMAGE_REQUEST_UNAUTHORIZED` — 502
  - الوصف: طلب الصورة الخارجي يتطلب تفويضًا ولم يُقدّم.
  - التصحيح: أضف رؤوس التفويض أو استعمل مصدر مفتوح.

- `OPTIMIZED_EXTERNAL_IMAGE_TOO_MANY_REDIRECTS` — 502
  - الوصف: إعادة توجيه متكررة عند جلب الصورة.
  - التصحيح: أصلح الروابط لتتجنّب حلقات إعادة التوجيه.


## **أخطاء الطلب (Request)**

- `INVALID_REQUEST_METHOD` — 405
  - الوصف: طريقة الطلب غير مسموح بها على هذا المسار.
  - التصحيح: استخدم الطريقة المناسبة (GET/POST/PUT...) أو حدّث routes.

- `MALFORMED_REQUEST_HEADER` — 400
  - الوصف: وجود ترويسة (header) غير صحيحة.
  - التصحيح: تأكد من صحة رؤوس HTTP وإزالة الرموز الغريبة.

- `RANGE_*` (مثل `RANGE_START_NOT_VALID`, `RANGE_END_NOT_VALID`, `RANGE_UNIT_NOT_SUPPORTED`, `RANGE_GROUP_NOT_VALID`, `RANGE_MISSING_UNIT`, `TOO_MANY_RANGES`) — 416
  - الوصف: مشاكل مع رؤوس `Range` في الطلب.
  - التصحيح: تحقق من صحة وإجماع القيم في `Range` عندما تطلب أجزاء من الموارد.

- `REQUEST_HEADER_TOO_LARGE` — 431
  - الوصف: رؤوس الطلب أكبر من الحد المسموح.
  - التصحيح: قلّل عدد الأحجام أو طول القيم، استخدم التخزين الجانبي بدلاً من إرسال بيانات كبيرة في رؤوس.

- `RESOURCE_NOT_FOUND` — 404
  - الوصف: المورد المطلوب غير موجود.
  - التصحيح: تحقق من المسار والملفات المنشورة.

- `TOO_MANY_RANGES` — 416
  - الوصف: عدد نطاقات `Range` كبير جدًا.
  - التصحيح: قلل عدد الطلبات الجزئية.

- `URL_TOO_LONG` — 414
  - الوصف: طول عنوان URL تجاوز الحد.
  - التصحيح: استخدم POST بدلاً من GET أو اختصر المعلمات.


## **أخطاء التوجيه (Routing)**

- `ROUTER_CANNOT_MATCH` — 502
  - الوصف: الموزّع (router) لم يجد تطابقًا مع أي مسار معرف.
  - التصحيح: راجع ملف `routes` أو بنية المسارات.

- `ROUTER_EXTERNAL_TARGET_CONNECTION_ERROR` — 502
  - الوصف: فشل الاتصال بالهدف الخارجي.
  - التصحيح: افحص عنوان الهدف الخارجي وموضوع الشبكات والـ firewall.

- `ROUTER_EXTERNAL_TARGET_ERROR` — 502
  - الوصف: استجابة خطأ من الهدف الخارجي.
  - التصحيح: راجع استجابة السيرفر البعيد.

- `ROUTER_EXTERNAL_TARGET_HANDSHAKE_ERROR` — 502
  - الوصف: فشل في مصافحة TLS/SSL مع الهدف الخارجي.
  - التصحيح: تحقق من شهادة الهدف وإعدادات TLS.

- `ROUTER_TOO_MANY_HAS_SELECTIONS` — 502
  - الوصف: خطأ تكوين في قواعد التوجيه (has selections كثيرة).
  - التصحيح: ابسط قواعد `has` في التوجيه.

- `TOO_MANY_FILESYSTEM_CHECKS` — 502
  - الوصف: تجاوز عدد عمليات التحقق من نظام الملفات.
  - التصحيح: قلّل عمليات القراءة المتكررة خلال الطلب.

- `TOO_MANY_FORKS` — 502
  - الوصف: التطبيق يفورك (fork) أكثر من الحد.
  - التصحيح: امتنع عن إنشاء عمليات متكررة أو استخدم مهام مدمجة/خادم خلفي.


## **أخطاء الساندبوكس (Sandbox / Runtime)**

- `SANDBOX_NOT_FOUND` — 404
  - الوصف: Sandbox مفقود.
  - التصحيح: تأكد من تكوين البيئة الصحيحة.

- `SANDBOX_NOT_LISTENING` — 502
  - (مذكور أعلاه في قسم الدوال)

- `SANDBOX_STOPPED` — 410
  - (مذكور أعلاه في قسم الدوال)

- `MIDDLEWARE_RUNTIME_DEPRECATED` — 503
  - الوصف: runtime للـ middleware مهجور.
  - التصحيح: حدّث runtime وإعدادات البنية.


## **أخطاء التخزين المؤقت (Cache)**

- `FALLBACK_BODY_TOO_LARGE` — 502
  - الوصف: جسم fallback أكبر من الحد.
  - التصحيح: قلّل حجم Fallback أو عدِّل سياسة التخزين المؤقت.


## **أخطاء داخلية للمنصة (Platform / Internal)**
(الأخطاء التالية عادةً تعني مشكلة داخلية في Vercel — تواصل مع الدعم مع لقطات للسجلات)

- `FUNCTION_THROTTLED` — 500
- `INTERNAL_CACHE_ERROR` — 500
- `INTERNAL_CACHE_KEY_TOO_LONG` — 500
- `INTERNAL_CACHE_LOCK_FULL` — 500
- `INTERNAL_CACHE_LOCK_TIMEOUT` — 500
- `INTERNAL_DEPLOYMENT_FETCH_FAILED` — 500
- `INTERNAL_EDGE_FUNCTION_INVOCATION_FAILED` — 500
- `INTERNAL_EDGE_FUNCTION_INVOCATION_TIMEOUT` — 500
- `INTERNAL_FUNCTION_INVOCATION_FAILED` — 500
- `INTERNAL_FUNCTION_INVOCATION_TIMEOUT` — 500
- `INTERNAL_FUNCTION_NOT_FOUND` — 500
- `INTERNAL_FUNCTION_NOT_READY` — 500
- `INTERNAL_FUNCTION_SERVICE_UNAVAILABLE` — 500
- `INTERNAL_MICROFRONTENDS_BUILD_ERROR` — 500
- `INTERNAL_MICROFRONTENDS_INVALID_CONFIGURATION_ERROR` — 500
- `INTERNAL_MICROFRONTENDS_UNEXPECTED_ERROR` — 500
- `INTERNAL_MISSING_RESPONSE_FROM_CACHE` — 500
- `INTERNAL_OPTIMIZED_IMAGE_REQUEST_FAILED` — 500
- `INTERNAL_ROUTER_CANNOT_PARSE_PATH` — 500
- `INTERNAL_STATIC_REQUEST_FAILED` — 500
- `INTERNAL_UNARCHIVE_FAILED` — 500
- `INTERNAL_UNEXPECTED_ERROR` — 500

  - ملاحظة: هذه الأخطاء غالبًا تتطلب تواصلاً مع دعم Vercel، وأي تقرير يجب أن يتضمن الـ `deployment id`، الوقت (timestamp)، ولقطات من السجلات (logs).


## **قائمة فحص سريعة للتشخيص (Troubleshooting Checklist)**

- **اجمع السجلات:** افتح لوحة التحكم في Vercel → اختر المشروع → Deployments → افتح النشر المتأثر → اطّلع على Logs (Server/Function/Edge). حصّل توقيت المشكلة (timestamps).

- **تكرار محلي:** شغّل `vercel dev` محليًا إن أمكن وحاول إعادة إنتاج المشكلة. أو شغّل الخادم محليًا عبر Node/فرونتند.

- **فحص الدوال (Functions):** تحقق من زمن التنفيذ، أحجام الحمولة (payloads)، استخدام الذاكرة، نقاط الفشل (try/catch) وسجلات مفصّلة.

- **التحقق من DNS:** استخدم `nslookup <domain>` أو `dig` محليًا، وتأكد من أن السجلات A/CNAME صحيحة ومتوافقة مع إعدادات Vercel.

- **الصور والتحسين:** إذا فشل تحسين الصور، تأكد من أن الروابط الخارجية تعمل، لا تحتاج إلى مصادقة، ولا تُعيد إعادة توجيه لانهائية.

- **حجم الرؤوس والـ URL:** إذا ظهرت أخطاء 414/431 فكر بتحويل طلبات GET طويلة إلى POST أو تخزين بيانات في body أو في مخزن (Redis/S3).

- **التحقق من الإعدادات:** افحص `vercel.json` أو ملفات التوجيه `routes`, `rewrites`, `headers` إن وُجدت.

- **مقاييس ومعدلات (Rate Limits):** راجع هل يتم الوصول إلى حدود الRate (requests/sec) وملفات الـ throttle.

- **التحقق من الإعدادات المالية/الاشتراك:** بعض الأخطاء 402/403 قد تكون بسبب حالة الفوترة أو حدود الخطة.


## **متى أساعدك بالخطوات التالية؟**

- أقدّم لك ملفًا `VERCEL_ERRORS.md` (موجود الآن في جذر المشروع). أستطيع:
  - تحويله إلى `VERCEL_ERRORS.html` أو `VERCEL_ERRORS.json` عند رغبتك.
  - البدء بتحليل الموقع فعليًا: أبحث في `script.js`, `index.html`, صفحات المقالات، وأبحث عن علامات قد تسبب أخطاء (نداءات شبكية خارجية، صور كبيرة، دوال serverless، إلخ).
  - تزويد أوامر مفيدة لجمع السجلات محليًا أو عبر CLI.


---

ملف مُنشأ تلقائيًا بواسطة مساعدك — إذا تريدني أبدأ مباشرة بفحص الأخطاء على ملفات المشروع الآن (مثل البحث عن استدعاءات للخارج أو ملفات صور كبيرة أو تحقّق من `script.js`) أكتب "افحص الموقع الآن" وسأبدأ فورًا بفحص الملفات في المستودع.